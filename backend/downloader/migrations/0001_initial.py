# Generated by Django 4.2.26 on 2025-12-02 03:33

from django.db import migrations, models
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AIProviderSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gemini_api_key', models.CharField(blank=True, help_text='Google Gemini API Key (for TTS, enhancement, etc.)', max_length=255)),
                ('openai_api_key', models.CharField(blank=True, help_text='OpenAI API Key (GPT models)', max_length=255)),
                ('anthropic_api_key', models.CharField(blank=True, help_text='Anthropic API Key (Claude models)', max_length=255)),
                ('script_generation_provider', models.CharField(choices=[('gemini', 'Google Gemini'), ('openai', 'OpenAI'), ('anthropic', 'Anthropic (Claude)')], default='gemini', help_text='AI provider for Hindi script generation', max_length=50)),
                ('default_provider', models.CharField(choices=[('gemini', 'Google Gemini'), ('openai', 'OpenAI'), ('anthropic', 'Anthropic (Claude)')], default='gemini', help_text='Default AI provider for general tasks (enhancement, TTS markup, etc.)', max_length=50)),
                ('provider', models.CharField(choices=[('gemini', 'Google Gemini'), ('openai', 'OpenAI'), ('anthropic', 'Anthropic (Claude)')], default='gemini', help_text='[DEPRECATED] Use script_generation_provider or default_provider instead', max_length=50)),
                ('api_key', models.CharField(blank=True, help_text='[DEPRECATED] Use provider-specific API keys instead', max_length=255)),
            ],
            options={
                'verbose_name': 'AI Provider Setting',
                'verbose_name_plural': 'AI Provider Settings',
            },
        ),
        migrations.CreateModel(
            name='CloudinarySettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cloud_name', models.CharField(blank=True, help_text='Cloudinary cloud name', max_length=255)),
                ('api_key', models.CharField(blank=True, help_text='Cloudinary API key', max_length=255)),
                ('api_secret', models.CharField(blank=True, help_text='Cloudinary API secret', max_length=255)),
                ('enabled', models.BooleanField(default=False, help_text='Enable Cloudinary uploads')),
            ],
            options={
                'verbose_name': 'Cloudinary Setting',
                'verbose_name_plural': 'Cloudinary Settings',
            },
        ),
        migrations.CreateModel(
            name='GoogleSheetsSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('spreadsheet_id', models.CharField(blank=True, help_text='Google Sheets spreadsheet ID', max_length=255)),
                ('sheet_name', models.CharField(default='Sheet1', help_text='Sheet name to write data to', max_length=255)),
                ('credentials_json', models.TextField(blank=True, help_text='Google Service Account JSON credentials')),
                ('enabled', models.BooleanField(default=False, help_text='Enable Google Sheets tracking')),
            ],
            options={
                'verbose_name': 'Google Sheets Setting',
                'verbose_name_plural': 'Google Sheets Settings',
            },
        ),
        migrations.CreateModel(
            name='VideoDownload',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('url', models.URLField(blank=True, help_text='Original video URL (optional for local uploads)', max_length=500, null=True)),
                ('video_id', models.CharField(blank=True, help_text='Unique Video ID', max_length=100, null=True, unique=True)),
                ('video_source', models.CharField(choices=[('rednote', 'RedNote/Xiaohongshu'), ('youtube', 'YouTube'), ('facebook', 'Facebook'), ('instagram', 'Instagram'), ('vimeo', 'Vimeo'), ('local', 'Local Upload'), ('other', 'Other')], default='rednote', help_text='Video source/platform', max_length=20)),
                ('title', models.CharField(blank=True, help_text='English Title (Translated)', max_length=500)),
                ('original_title', models.CharField(blank=True, help_text='Original Chinese Title', max_length=500)),
                ('description', models.TextField(blank=True, help_text='English Description (Translated)')),
                ('original_description', models.TextField(blank=True, help_text='Original Chinese Description')),
                ('video_url', models.URLField(blank=True, help_text='Extracted video URL', max_length=1000)),
                ('cover_url', models.URLField(blank=True, help_text='Cover/thumbnail URL', max_length=1000)),
                ('local_file', models.FileField(blank=True, help_text='1. Downloaded video file (original with audio)', null=True, upload_to='videos/')),
                ('is_downloaded', models.BooleanField(default=False, help_text='Is video saved locally?')),
                ('duration', models.FloatField(blank=True, help_text='Video duration in seconds', null=True)),
                ('voice_removed_video', models.FileField(blank=True, help_text='2. Video file after removing original audio (no audio)', null=True, upload_to='videos/voice_removed/')),
                ('voice_removed_video_url', models.URLField(blank=True, help_text='2. Video URL after removing original audio (no audio)', max_length=1000)),
                ('final_processed_video', models.FileField(blank=True, help_text='3. Final video file after TTS audio replacement (with new Hindi audio)', null=True, upload_to='videos/final/')),
                ('final_processed_video_url', models.URLField(blank=True, help_text='3. Final video URL after TTS audio replacement (with new Hindi audio)', max_length=1000)),
                ('extraction_method', models.CharField(blank=True, choices=[('seekin', 'Seekin API'), ('yt-dlp', 'yt-dlp'), ('requests', 'Direct Requests'), ('local', 'Local Upload')], help_text='Which extraction method succeeded', max_length=20)),
                ('status', models.CharField(choices=[('success', 'Success'), ('failed', 'Failed'), ('pending', 'Pending')], default='pending', help_text='Extraction status', max_length=20)),
                ('error_message', models.TextField(blank=True, help_text='Error message if failed')),
                ('extraction_started_at', models.DateTimeField(blank=True, help_text='When video extraction/download started', null=True)),
                ('extraction_finished_at', models.DateTimeField(blank=True, help_text='When video extraction/download finished', null=True)),
                ('ai_processing_status', models.CharField(choices=[('not_processed', 'Not Processed'), ('processing', 'Processing'), ('processed', 'Processed'), ('failed', 'Failed')], default='not_processed', help_text='AI processing status', max_length=20)),
                ('ai_processing_started_at', models.DateTimeField(blank=True, help_text='When AI processing started', null=True)),
                ('ai_processed_at', models.DateTimeField(blank=True, help_text='When AI processing was completed', null=True)),
                ('ai_summary', models.TextField(blank=True, help_text='AI-generated summary or analysis')),
                ('ai_tags', models.CharField(blank=True, help_text='AI-generated tags (comma-separated)', max_length=500)),
                ('ai_error_message', models.TextField(blank=True, help_text='AI processing error message if failed')),
                ('transcription_status', models.CharField(choices=[('not_transcribed', 'Not Transcribed'), ('transcribing', 'Transcribing'), ('transcribed', 'Transcribed'), ('failed', 'Failed')], default='not_transcribed', help_text='NCA Transcription status', max_length=20)),
                ('transcript', models.TextField(blank=True, help_text='NCA: Full transcript WITH timestamps (00:00:00 format)')),
                ('transcript_without_timestamps', models.TextField(blank=True, help_text='NCA: Full transcript WITHOUT timestamps (plain text)')),
                ('transcript_hindi', models.TextField(blank=True, help_text='NCA: Hindi translation of the transcript')),
                ('transcript_language', models.CharField(blank=True, help_text='NCA: Detected language of transcript', max_length=10)),
                ('transcript_started_at', models.DateTimeField(blank=True, help_text='When NCA transcription started', null=True)),
                ('transcript_processed_at', models.DateTimeField(blank=True, help_text='When NCA transcription was completed', null=True)),
                ('transcript_error_message', models.TextField(blank=True, help_text='NCA: Transcription error message if failed')),
                ('whisper_transcription_status', models.CharField(choices=[('not_transcribed', 'Not Transcribed'), ('transcribing', 'Transcribing'), ('transcribed', 'Transcribed'), ('failed', 'Failed')], default='not_transcribed', help_text='Whisper Transcription status', max_length=20)),
                ('whisper_transcript', models.TextField(blank=True, help_text='Whisper: Full transcript WITH timestamps (00:00:00 format)')),
                ('whisper_transcript_without_timestamps', models.TextField(blank=True, help_text='Whisper: Full transcript WITHOUT timestamps (plain text)')),
                ('whisper_transcript_hindi', models.TextField(blank=True, help_text='Whisper: Hindi translation of the transcript')),
                ('whisper_transcript_language', models.CharField(blank=True, help_text='Whisper: Detected language (ISO code)', max_length=10)),
                ('whisper_transcript_segments', models.JSONField(blank=True, help_text='Whisper: Raw segments with timestamps and confidence scores', null=True)),
                ('whisper_transcript_started_at', models.DateTimeField(blank=True, help_text='When Whisper transcription started', null=True)),
                ('whisper_transcript_processed_at', models.DateTimeField(blank=True, help_text='When Whisper transcription was completed', null=True)),
                ('whisper_transcript_error_message', models.TextField(blank=True, help_text='Whisper: Transcription error message if failed')),
                ('whisper_model_used', models.CharField(blank=True, help_text='Whisper model size used (tiny/base/small/medium/large)', max_length=20)),
                ('whisper_confidence_avg', models.FloatField(blank=True, help_text='Whisper: Average confidence score across all segments', null=True)),
                ('has_audio', models.BooleanField(default=True, help_text='Whether video contains audio track')),
                ('visual_transcript', models.TextField(blank=True, help_text='Visual: Frame-by-frame description WITH timestamps (HH:MM:SS format)')),
                ('visual_transcript_without_timestamps', models.TextField(blank=True, help_text='Visual: Frame-by-frame description WITHOUT timestamps (plain text)')),
                ('visual_transcript_hindi', models.TextField(blank=True, help_text='Visual: Hindi translation of visual description')),
                ('visual_transcript_segments', models.JSONField(blank=True, help_text='Visual: Raw segments with timestamps and descriptions', null=True)),
                ('visual_transcript_started_at', models.DateTimeField(blank=True, help_text='When visual transcription started', null=True)),
                ('visual_transcript_finished_at', models.DateTimeField(blank=True, help_text='When visual transcription finished', null=True)),
                ('enhanced_transcript', models.TextField(blank=True, help_text='Enhanced: AI-merged transcript WITH timestamps (HH:MM:SS format) - combines Whisper, NCA, and Visual')),
                ('enhanced_transcript_without_timestamps', models.TextField(blank=True, help_text='Enhanced: AI-merged transcript WITHOUT timestamps (plain text)')),
                ('enhanced_transcript_hindi', models.TextField(blank=True, help_text='Enhanced: Hindi translation of enhanced transcript')),
                ('enhanced_transcript_segments', models.JSONField(blank=True, help_text='Enhanced: Raw segments with timestamps from AI enhancement', null=True)),
                ('enhanced_transcript_started_at', models.DateTimeField(blank=True, help_text='When enhanced transcript generation started', null=True)),
                ('enhanced_transcript_finished_at', models.DateTimeField(blank=True, help_text='When enhanced transcript generation finished', null=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, help_text='When the download was requested')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Last update time')),
                ('synthesis_status', models.CharField(choices=[('not_synthesized', 'Not Synthesized'), ('synthesizing', 'Synthesizing'), ('synthesized', 'Synthesized'), ('failed', 'Failed')], default='not_synthesized', help_text='Audio synthesis status', max_length=20)),
                ('synthesis_error', models.TextField(blank=True, help_text='Synthesis error message if failed')),
                ('synthesized_audio', models.FileField(blank=True, help_text='Synthesized audio file', null=True, upload_to='synthesized_audio/')),
                ('synthesis_started_at', models.DateTimeField(blank=True, help_text='When audio synthesis started', null=True)),
                ('synthesized_at', models.DateTimeField(blank=True, help_text='When audio synthesis finished', null=True)),
                ('final_video_status', models.CharField(choices=[('not_started', 'Not Started'), ('removing_audio', 'Removing Audio'), ('combining_audio', 'Combining Audio'), ('completed', 'Completed'), ('failed', 'Failed')], default='not_started', help_text='Final video assembly status', max_length=20)),
                ('final_video_error', models.TextField(blank=True, help_text='Final video assembly error message if failed')),
                ('final_video_started_at', models.DateTimeField(blank=True, help_text='When final video assembly started', null=True)),
                ('final_video_finished_at', models.DateTimeField(blank=True, help_text='When final video assembly finished', null=True)),
                ('script_status', models.CharField(choices=[('not_generated', 'Not Generated'), ('generating', 'Generating'), ('generated', 'Generated'), ('failed', 'Failed')], default='not_generated', help_text='Hindi script generation status', max_length=20)),
                ('hindi_script', models.TextField(blank=True, help_text='AI-generated Hindi script for TTS')),
                ('script_error_message', models.TextField(blank=True, help_text='Script generation error message if failed')),
                ('script_started_at', models.DateTimeField(blank=True, help_text='When script generation started', null=True)),
                ('script_generated_at', models.DateTimeField(blank=True, help_text='When script generation finished', null=True)),
                ('script_edited', models.BooleanField(default=False, help_text='Whether script was manually edited by user')),
                ('script_edited_at', models.DateTimeField(blank=True, help_text='When script was last edited', null=True)),
                ('tts_speed', models.FloatField(default=1.0, help_text='TTS speed multiplier (calculated from duration)')),
                ('tts_temperature', models.FloatField(default=0.75, help_text='TTS temperature parameter')),
                ('tts_repetition_penalty', models.FloatField(default=5.0, help_text='TTS repetition penalty')),
                ('review_status', models.CharField(choices=[('pending_review', 'Pending Review'), ('approved', 'Approved'), ('needs_revision', 'Needs Revision'), ('rejected', 'Rejected')], default='pending_review', help_text='Review status of final processed video', max_length=20)),
                ('review_notes', models.TextField(blank=True, help_text='Review notes or feedback')),
                ('reviewed_at', models.DateTimeField(blank=True, help_text='When video was reviewed', null=True)),
                ('cloudinary_url', models.URLField(blank=True, help_text='Cloudinary URL for final processed video', max_length=1000)),
                ('cloudinary_upload_started_at', models.DateTimeField(blank=True, help_text='When Cloudinary upload started', null=True)),
                ('cloudinary_uploaded_at', models.DateTimeField(blank=True, help_text='When Cloudinary upload finished', null=True)),
                ('generated_title', models.CharField(blank=True, help_text='AI-generated title for video', max_length=500)),
                ('generated_description', models.TextField(blank=True, help_text='AI-generated description for video')),
                ('generated_tags', models.CharField(blank=True, help_text='AI-generated tags (comma-separated)', max_length=1000)),
                ('google_sheets_synced', models.BooleanField(default=False, help_text='Whether data has been synced to Google Sheets')),
                ('google_sheets_sync_started_at', models.DateTimeField(blank=True, help_text='When Google Sheets sync started', null=True)),
                ('google_sheets_synced_at', models.DateTimeField(blank=True, help_text='When Google Sheets sync finished', null=True)),
            ],
            options={
                'verbose_name': 'Video Download',
                'verbose_name_plural': 'Video Downloads',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WatermarkSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enabled', models.BooleanField(default=False, help_text='Enable watermark on videos')),
                ('watermark_text', models.CharField(blank=True, default='', help_text='Watermark text to display on videos', max_length=100)),
                ('font_size', models.IntegerField(default=24, help_text='Font size for watermark text')),
                ('font_color', models.CharField(default='white', help_text="Font color (e.g., 'white', 'black', '#FFFFFF')", max_length=20)),
                ('position_change_interval', models.FloatField(default=1.0, help_text='Position change interval in seconds (how often watermark moves)')),
                ('opacity', models.FloatField(default=0.7, help_text='Watermark opacity (0.0 to 1.0)')),
            ],
            options={
                'verbose_name': 'Watermark Setting',
                'verbose_name_plural': 'Watermark Settings',
            },
        ),
    ]
